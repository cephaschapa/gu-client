import React, {useState, useEffect} from "react";
import Head from 'next/head'
import Image from 'next/image'
import BottomNavBar from '../../components/BottonNavBar'
import {useRouter} from 'next/router'
import Header from '../../components/Header'
import dynamic from 'next/dynamic'
import axios from 'axios'
import { CameraIcon, ChevronDoubleRightIcon, ChevronRightIcon, FilterIcon, ShoppingCartIcon, ViewListIcon } from "@heroicons/react/outline";


const QrReader = dynamic(() => import('react-qr-reader'), {
    ssr: false
})



function Scan() {
    const [result, setResult] = useState([])
    const router = useRouter()
    useEffect(() => {
        async function d(){
            // const res = await axios.get('http://localhost:3000/api/hello')
            // console.log(res)
            // const {productName,numDaysToExpire,pesticideInfo,packager,location,managerInfo,inspection,halaalCert, dateProcessed, batchNumber, freshNess, gmoStatus} = res.data
            // const array = [productName,numDaysToExpire,pesticideInfo,packager,location,managerInfo,inspection,halaalCert, dateProcessed, batchNumber, freshNess, gmoStatus]
            // array.push()
            // setResult(array)
            // console.log(result)
        }
        
    }, []);

    const handleScan = data => {
         
       if(dats){
        alert(data)
        const ob = {
            batchNumber: "AFF45678B", 
            dateProcessed: "10/10/2021",
            productName: "Savanna Tomatos",
            packager: "Luka Farms",
            location: "Lusaka, Zambia",
            managerInfo: "John Doe",
            pesticideInfo: "Pesticide Free",
            gmoStatus: "Non GMO",
            inspection: "Inspected for consuption",
            numDaysToExpire: "18",
            freshNess: "Fresh"
        }
        const {productName,numDaysToExpire,pesticideInfo,packager,location,managerInfo,inspection,halaalCert, dateProcessed, batchNumber, freshNess, gmoStatus} = ob
        const array = [productName,numDaysToExpire,pesticideInfo,packager,location,managerInfo,inspection,halaalCert, dateProcessed, batchNumber, freshNess, gmoStatus]
        array.push()

        console(array)
        // alert(data)
        setResult(array)
       }else{
        const ob = {
            batchNumber: "AFF45678B",
            dateProcessed: "10/10/2021",
            productName: "Savanna Tomatos",
            packager: "Luka Farms",
            location: "Lusaka, Zambia",
            managerInfo: "John Doe",
            pesticideInfo: "Pesticide Free",
            gmoStatus: "Non GMO",
            inspection: "Inspected for consuption",
            numDaysToExpire: "18",
            freshNess: "Fresh"
        }
        const {productName,numDaysToExpire,pesticideInfo,packager,location,managerInfo,inspection,halaalCert, dateProcessed, batchNumber, freshNess, gmoStatus} = ob
        const array = [productName,numDaysToExpire,pesticideInfo,packager,location,managerInfo,inspection,halaalCert, dateProcessed, batchNumber, freshNess, gmoStatus]
        array.push()

        console(array)
        alert(data)
        setResult(array)
       }
    }

    const handleError = (err) => {
        alert("Please allow carema permissions")
        console.error(err)
    }

    return (
        <div className="main">
            <Head>
                <title>Greenupp | Scan</title>
                <meta name="description" content="Generated by create next app" />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <Header />
            <section className=" justify-center items-center h-screen pt-20 px-4 rounded-2xl">
    
                <div onClick={()=>router.push('scan/qr')} className="flex flex-col fixed bottom-20 right-2 transition duration-200 shadow-xl float-right  items-center justify-center h-16 w-16 rounded-full bg-green-600 z-20">
                    
                    <CameraIcon className="h-6 w-6 text-white"/>
                    {/* <span className="text-sm">K400</span> */}
                </div>
                <div className="flex justify-between space-x-1 items-center text-gray-600 pb-4 border-b border-gray-300">
                    <div className="flex items-center space-x-1">
                        <ViewListIcon className="h-6 w-6 "/>
                        <p className="font-bold text-lg">History</p>
                    </div>
                    <div className="flex items-center">
                        <FilterIcon className="h-6 w-6 "/>
                    </div>
                </div>
                <div className="py-2 space-y-2">
                    <p className="font-bold">Today</p>
                    <div className="flex space-x-2 p-2 bg-gray-100 rounded-2xl">
                        <div className="relative h-16 w-16">
                            <Image src="/apples.jpg" objectFit="cover" layout="fill" className="rounded-2xl"/>
                        </div>
                        <div className="flex justify-center flex-col">
                            <p className="font-bold">Mediterranean Red Apples</p>
                            <p className="">Shop XYZ</p>
                            
                        </div>
                        <div className="flex flex-grow justify-end">
                            <button className="">
                                <ChevronRightIcon className="h-8 w-8 bg-green-600 p-1 text-white rounded-full" />
                            </button>
                        </div>
                    </div>
                    <div className="flex space-x-2 p-2 bg-gray-100 rounded-2xl">
                        <div className="relative h-16 w-16">
                            <Image src="/banana.jpg" objectFit="cover" layout="fill" className="rounded-2xl"/>
                        </div>
                        <div className="flex justify-center flex-col">
                            <p className="font-bold">Bananas</p>
                            <p className="">Shop XYZ</p>
                            
                        </div>
                        <div className="flex flex-grow justify-end">
                            <button className="">
                                <ChevronRightIcon className="h-8 w-8 bg-green-600 p-1 text-white rounded-full" />
                            </button>
                        </div>
                    </div>
                    <p className="font-bold">Yesterday</p>
                    <div className="flex space-x-2 p-2 bg-gray-100 rounded-2xl">
                        <div className="relative h-16 w-16">
                            <Image src="/pineapples.jpg" objectFit="cover" layout="fill" className="rounded-2xl"/>
                        </div>
                        <div className="flex justify-center flex-col">
                            <p className="font-bold">Pineapples</p>
                            <p className="">Shop ABC</p>
                            
                        </div>
                        <div className="flex flex-grow justify-end">
                            <button className="">
                                <ChevronRightIcon className="h-8 w-8 bg-green-600 p-1 text-white rounded-full" />
                            </button>
                        </div>
                    </div>
                    <div className="flex space-x-2 p-2 bg-gray-100 rounded-2xl">
                        <div className="relative h-16 w-16">
                            <Image src="/cabbage.jpg" objectFit="cover" layout="fill" className="rounded-2xl"/>
                        </div>
                        <div className="flex justify-center flex-col">
                            <p className="font-bold">Cabbage</p>
                            <p className="">Shop ABC</p>
                            
                        </div>
                        <div className="flex flex-grow justify-end">
                            <button className="">
                                <ChevronRightIcon className="h-8 w-8 bg-green-600 p-1 text-white rounded-full" />
                            </button>
                        </div>
                    </div>
                    <p className="font-bold">Sunday</p>
                    <div className="flex space-x-2 p-2 bg-gray-100 rounded-2xl">
                        <div className="relative h-16 w-16">
                            <Image src="/pineapples.jpg" objectFit="cover" layout="fill" className="rounded-2xl"/>
                        </div>
                        <div className="flex justify-center flex-col">
                            <p className="font-bold">Pineapples</p>
                            <p className="">Shop ABC</p>
                            
                        </div>
                        <div className="flex flex-grow justify-end">
                            <button className="">
                                <ChevronRightIcon className="h-8 w-8 bg-green-600 p-1 text-white rounded-full" />
                            </button>
                        </div>
                    </div>
                    <div className="flex space-x-2 p-2 bg-gray-100 rounded-2xl">
                        <div className="relative h-16 w-16">
                            <Image src="/cabbage.jpg" objectFit="cover" layout="fill" className="rounded-2xl"/>
                        </div>
                        <div className="flex justify-center flex-col">
                            <p className="font-bold">Cabbage</p>
                            <p className="">Shop ABC</p>
                            
                        </div>
                        <div className="flex flex-grow justify-end">
                            <button className="">
                                <ChevronRightIcon className="h-8 w-8 bg-green-600 p-1 text-white rounded-full" />
                            </button>
                        </div>
                    </div>
                    <div className="flex space-x-2 p-2 bg-gray-100 rounded-2xl">
                        <div className="relative h-16 w-16">
                            <Image src="/pineapples.jpg" objectFit="cover" layout="fill" className="rounded-2xl"/>
                        </div>
                        <div className="flex justify-center flex-col">
                            <p className="font-bold">Pineapples</p>
                            <p className="">Shop ABC</p>
                            
                        </div>
                        <div className="flex flex-grow justify-end">
                            <button className="">
                                <ChevronRightIcon className="h-8 w-8 bg-green-600 p-1 text-white rounded-full" />
                            </button>
                        </div>
                    </div>
                    <div className="flex space-x-2 p-2 bg-gray-100 rounded-2xl">
                        <div className="relative h-16 w-16">
                            <Image src="/cabbage.jpg" objectFit="cover" layout="fill" className="rounded-2xl"/>
                        </div>
                        <div className="flex justify-center flex-col">
                            <p className="font-bold">Cabbage</p>
                            <p className="">Shop ABC</p>
                            
                        </div>
                        <div className="flex flex-grow justify-end">
                            <button className="">
                                <ChevronRightIcon className="h-8 w-8 bg-green-600 p-1 text-white rounded-full" />
                            </button>
                        </div>
                    </div>
                </div>
                
            </section>
            <section className="px-4">
                
            </section>
            <nav className="">
                <BottomNavBar />
            </nav> 
        </div>
    )
}

export default Scan
